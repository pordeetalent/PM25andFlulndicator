# AWS IoT Core
## การใช้งานโค้ด AWS IoT Core สำหรับโครงการนี้

AWS IoT Core เป็นบริการ IoT ของ AWS โดยรูปแบบการให้บริการคือ AWS จะมีบริการรับและส่งข้อมูล PubSub โดยที่เราจะทำให้บอร์ด NodeMCU ของเราส่งข้อมูลขึ้นไปยัง AWS ของเรา

## จัดเตรียมสภาพแวดล้อมบน AWS

การจัดทำสภาพแวดล้อมบน AWS เพื่อให้รองรับการใช้งานของโครงการนี้จะมีขั้นตอนดังนี้

### สร้าง User IAM

สร้าง User สำหรับ Programatic job เพื่อให้ User นี้เข้าถึงการใช้งาน Thing ที่จะสร้างขึ้นได้

### สร้าง Thing

สร้าง Thing เพื่อระบุให้เป็นบอร์ด NodeMCU ที่เราจะใช้งาน

### รายการ Credential จาก AWS

เมื่อจัดทำครบแล้ว เราจะได้ค่าต่างๆ ซึ่งจะต้องนำไปใส่ในโค้ดดังนี้

- End point
- ID
- Secret
- Pub
- Sub

## จัดเตรียมเครื่องสำหรับเขียนโค้ด

### ซอฟต์แวร์ที่ต้องใช้

- Arduino 1.6.8
- Python2 หรือ 3
- git

### ขั้นตอนการจัดเตรียม

1. ดาวน์โหลด Arduino โดยให้เลือกเป็นเวอร์ชั่น 1.6.8 และติดตั้ง
2. ติดตั้งบอร์ด ESP8266
 - เปิดโปรแกรม Arduino ไปที่ Preference
 - เพิ่ม http://arduino.esp8266.com/stable/package_esp8266com_index.json ลงในช่อง Additional Board Manager
 - ที่โปรแกรม Arduino เปิดบอร์ด Manager
 - เลือก esp8266 โดยให้ติดตั้งเวอร์ชั่น 2.4.2
 - เข้าไปที่โฟลเดอร์ Documents/Arduino/hardware/esp8266com (หากยังไม่มี ให้สร้างโฟลเดอร์ขึ้นมา)
 - เปิด Terminal เข้าไปที่โฟลเดอร์ข้างต้น พิมพ์คำสั่ง git clone https://github.com/esp8266/Arduino.git esp8266
 - cd เข้าไปที่โฟลเดอร์ esp8266/tools (Documents/Arduino/hardware/esp8266com/esp8266/tools)
 - พิมพ์คำสั่ง python get.py

## จัดทำบอร์ด

สำหรับขั้นตอนนี้ เราได้มีอุปกรณ์ NodeMCU พร้อมเดินลายวงจรและเซ็นเซอร์ไว้เรียบร้อยแล้ว โดยดูได้ที่ README.md ของโฟลเดอร์หลักของโครงการ

## จัดทำโค้ดสำหรับโครงการ

เมื่อจัดทำอุปกรณ์เสร็จแล้ว ให้เลือกโค้ดที่จะใช้เพื่ออัปโหลดลงบอร์ด โดยโค้ดจะอยู่ในโฟลเดอร์ code ซึ่งจะมีโค้ดในรูปแบบ AWS IoT Core

1. ดาวน์โหลดโค้ดของ Git โครงดารนี้ โดยคุณจะเห็นโฟลเดอร์ code ซึ่งจะแบ่งเป็นสองชุด คือโค้ดสำหรับ โครงการแบบ AWS IoT Core
2. ให้นำไฟล์โค้ด (AWS IoT Core) ไปไว้ยัง Workspace ของ Arduino แล้วเปิดไฟล์ขึ้นมาแก้ไข
3. ดูการตั้งค่าเพิ่มเติมในเอกสารของโค้ดแต่ละแบบ
4. ตั้งค่า และอัปโหลดโค้ดลงบอร์ด
